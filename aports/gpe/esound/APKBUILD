# Contributor: Duncan Guthrie <dguthrie@posteo.net>
# Maintainer: Duncan Guthrie <dguthrie@posteo.net>
pkgname=esound
pkgver=0.2.41
pkgrel=0
pkgdesc="Legacy sound server for GNOME and Enlightenment"
url="http://ftp.gnome.org/pub/gnome/sources/esound/0.2/"
arch="all"
license="GPL-2.0"
depends="audiofile alsa-lib"
makedepends="alsa-lib-dev audiofile-dev"
source="${url}/${pkgname}-${pkgver}.tar.gz
	01_relocate_libesddsp.patch
	02_missing_var.patch
	03_hurd.patch
	04_audsp_crash.patch
	05_libm.patch
	06-audio_alsa09.c-alsa-drain-fix.patch
	07-Undefine-open64-and-fopen64.patch
	08-Use-I-path-in-configure.patch"
builddir="${srcdir}/${pkgname}-${pkgver}"
options="!check"
subpackages="${pkgname}-dev ${pkgname}-doc"
prepare() {
	default_prepare
	update_config_sub
}
build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}
package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}
sha512sums="1104bd88d8fefcdb4d6092f75c6455cd1af1a5b4e1e2a3b036832e77bca77af840f1eedb6f7eb0de448ec1fdabebbce09320b4e3b2cf42e5e488c496ec327f70  esound-0.2.41.tar.gz
041ce1edbc80379adf5e3fba3d07b7699ffe63ee470899125671357020dc990dec94b0b1ce207c74f7986ab1812474add06315068ccfa242696401770146dd7f  01_relocate_libesddsp.patch
13c01a4a262cb4f27692e5b9cc652986e44e7ab19d4d77edd054f8936b78461c2149cd122564534701daa176339eb444be136f61a4aa355906f65026669e46d7  02_missing_var.patch
c333c83d64f3f560f8ecb4589245b4d654cdf15b2aa54f768323824e89e80804f82a47380b1f77b3b348429779aae95c3b6442e317d6c833ffe1e3c9fa0aef86  03_hurd.patch
76b63838b1a515aeaff59f9cb4872621c2296e67505d0f0f515f62c3d5bd8b748b579a3aab1f2371a1e84d593c60e96c0396e5b314808632ddcf9509aadfd5bb  04_audsp_crash.patch
df35015e9f5e9a92c58da93449d73fa9f3dda1163cfbaff1b1188af47e7c4dc9917cf419ff9ccc77d1ac4980304087028dc0f438d4bd7dbcae3547a095f85a15  05_libm.patch
0a6638e1ac11b9c1ab5942c3cba4cc517a286f90aa704d663c4c0917c0fa9451a6ac79ec31458a18d0c73f2ed96c9ecdfdb6fe80f081dcbb3e84f5d2b12a4b72  06-audio_alsa09.c-alsa-drain-fix.patch
1cabc21a2592095710183d784e2d0b02613ce18c0b5d861ddbbf6516ed1712ef256b0bf46326ff2a32a0b0f801d61fd5a6fcdb1ba509034045cbd7df0fe355d0  07-Undefine-open64-and-fopen64.patch
71342b62019e94fe9b3b39f7c31703204cd3f78cc8b911f06a1769a3def60ca0ad62421329e82cb28ce56b2c65875b765ac1583fd1cdaea9a988c2ada03ad3d0  08-Use-I-path-in-configure.patch"

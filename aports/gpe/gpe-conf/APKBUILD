# Contributor: Duncan Guthrie <dguthrie@posteo.net>
# Maintainer: Duncan Guthrie <dguthrie@posteo.net>
pkgname=gpe-conf
pkgver=0.2.9
pkgrel=0
pkgdesc="Configuration toolset for the GPE Palmtop Environment"
url="https://wiki.postmarketos.org/wiki/GPE"
arch="all"
license="GPL-2.0 LGPL-2.0"
depends="atk freetype fontconfig gdk-pixbuf glib gtk+2.0 pango libxrandr libx11
	libxsettings-client libgpewidget esound audiofile xst gpe-confd"
makedepends="intltool gtk+2.0-dev glib-dev libx11-dev libxrandr-dev linux-headers
	esound-dev libgpewidget-dev libxsettings-dev libxsettings-client-dev"
source="http://http.debian.net/debian/pool/main/g/${pkgname}/${pkgname}_${pkgver}.orig.tar.gz
	01-desktop-validity.patch
	02-format-security.patch
	03-timeanddate.patch"
builddir="$srcdir/$pkgname-$pkgver"
options="!check suid"
subpackages="$pkgname-lang"
prepare() {
	default_prepare
	update_config_sub
}
build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make
}
package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}
sha512sums="2fead7cde26073a3ff5a7c4a7aecc02c6c4429ea9c70ce2e3c852337ddb9ea89256a3117784369faa5e493a9dd63c55381569246aa24b90bfbe409408f88b292  gpe-conf_0.2.9.orig.tar.gz
62ade19723112a8c66e01b151870f89b7f450cc16b9ddce0217770455f0904e98fa010eba4fc147df6a0c1bdd0804bb0fd1389f3814552efc1030f9dd6a9283e  01-desktop-validity.patch
269976f8c0218b9c10eb31ea17a2703b93dd8892e6de7aeb3e03338831ea2ffbd735e5dfbef256f19f1712abe1fdf70ce96b05f6506835dfb61e806d409767cf  02-format-security.patch
3a33adc5f8ce94f3d14868e6ebfa82427e1403635b9e551ca9d7d39686b7df5dba3eadfa2eb51496f4b26ac6fa6f086f6cd5c8378b6b76356c0e2c7335c8116c  03-timeanddate.patch"

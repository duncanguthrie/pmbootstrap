# Contributor: Duncan Guthrie <dguthrie@posteo.net>
# Maintainer: Duncan Guthrie <dguthrie@posteo.net>
pkgname=libmimedir
pn=$pkgname-gnome
pkgver=0.4.2
pkgrel=0
pkgdesc="Library that implements MIME directory profiles"
url="https://wiki.postmarketos.org/wiki/GPE"
arch="all"
license="LGPL 2.0-or-later"
depends="glib"
makedepends="glib-dev gtk-doc gnome-common musl-dev"
subpackages="$pkgname-dev $pkgname-doc $pkgname-lang"
source="http://http.debian.net/debian/pool/main/libm/${pn}/${pn}_${pkgver}.orig.tar.gz
	01-format-strings.patch
	02-ssize_t.patch"
builddir="${srcdir}/${pkgname}-${pkgver}"
options="!check"
prepare() {
	default_prepare
	update_config_sub
}
build() {
	cd "$builddir"
	./configure \
		--build=$CBUILD \
		--host=$CHOST \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man \
		--localstatedir=/var
	make -j1
}
package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}
sha512sums="42a7e5f396408e871d3b12261a4b455d8ac10280125365ad6fc57e503e55b1c8b2f6322c28b014212905ef755052c2ccbce20f8f5920a1dcc38739a06c7d495d  libmimedir-gnome_0.4.2.orig.tar.gz
dcdd768f56a99724e190bb2ded0828f9767162ba8de625c7aef3de2e5307a294f250a51e425db50034a5d22ec653c134a8646d4dcb0c9dbd64284cebc61746cd  01-format-strings.patch
85b08ba12eedcbb62414eb72bf2bf5b5efedb601f3b9ea6d4ae36149d77f58a78940df1c0e9ff6e8ca299748a924bf6c7b6c44f0a605f9082b86b7fe72c410bf  02-ssize_t.patch"
